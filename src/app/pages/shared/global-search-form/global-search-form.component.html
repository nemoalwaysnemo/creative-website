<form class="global-search-form" [formGroup]="searchForm" #form="ngForm" autocomplete="off" novalidate>
  <ng-container *ngIf="isShowInput()">
    <div class="search-input global-search-input left">
      <input class="form-control left" autofocus formControlName="ecm_fulltext" [placeholder]="placeholder" (keyup)="onKeyup($event)" [ngClass]="{'with-filters': hasFilters()}" />
    </div>
  </ng-container>
  <ng-container *ngIf="hasFilters()">
    <div class="search-filters global-search-filters left">
      <button type="button" (click)="toggleFilter()" class="advanced-filters-trigger icon_btn" [ngClass]="{'success': showFilter, 'btn-disabled': !hasAggs}" [disabled]="!hasAggs" title="Filter">Filter</button>
    </div>
  </ng-container>
  <div class="search-filters left">
    <ng-content select=".group-left"></ng-content>
  </div>
  <div class="button-groups right">
    <ng-content select=".group-right"></ng-content>
  </div>
  <div class="clear"></div>
  <ng-container *ngIf="hasFilters() && showFilter">
    <global-search-filter formControlName="aggregates" [aggregateModels]="aggregateModels$ | async" [disableControl]="submitted" (selected)="onFilterSelected($event)"></global-search-filter>
  </ng-container>
</form>
