<div class="batch-upload">
  <ng-container [ngSwitch]="true">
    <div class="batch-upload-queue">
      <h6 *ngIf="uploadSettings.multiUpload">{{ uploadItems.length }} Queued Files</h6>
      <table class="table">
        <thead>
          <tr>
            <th>File Name</th>
            <th>Title</th>
            <th>Size</th>
            <th *ngIf="uploadSettings.multiUpload">Action</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let item of uploadItems; let i=index">
            <td nowrap title="{{item.fileName}}"><strong>{{ parseFileName(item.fileName) }}</strong></td>
            <td *ngIf="uploadSettings.enableInput && item.isMainFile()">
              <dynamic-ng-form [formClass]="'document-form'" [group]="formGroups[i]" [formModel]="formModels[i]" [layout]="formLayout" (customEvent)="onCustomEvent($event)" (blur)="onBlur($event)" (change)="onChange($event)"
                (focus)="onFocus($event)"></dynamic-ng-form>
            </td>
            <td *ngIf="!item.isMainFile() || item.formMode === 'edit'">{{ item.getFileType() }}</td>
            <td nowrap *ngIf="item.original">{{ item.fileSize/1024/1024 | number:'.2' }} MB</td>
            <td nowrap *ngIf="!item.original">{{ item.fileSize/1024/1024 | number:'.2' }} MB, {{ item.percentLoaded }}%</td>
            <td nowrap *ngIf="uploadSettings.multiUpload"><button nbButton outline class="btn btn-danger btn-xs" status="danger" (click)="removeOne(i)" [disabled]="(uploadStatus$ | async)?.disableDeleteButton() || item.isMainFile()">Delete</button></td>
          </tr>
        </tbody>
      </table>
      <div class="button-group" *ngIf="uploadSettings.multiUpload">
        <button nbButton class="btn btn-success btn-xs" status="success" [disabled]="(uploadStatus$ | async)?.disableUploadButton() || getUploadFileSize() === 0" (click)="uploadFiles(uploadItems)">Upload</button>
        <button nbButton class="btn btn-danger btn-xs" status="danger" [disabled]="(uploadStatus$ | async)?.disableUploadButton() || getUploadFileSize() === 0" (click)="removeAll()">Discard</button>
      </div>
    </div>
  </ng-container>
</div>
